{% include "linkage/header.html" %}

<body>

<div id="header">
  {% include "linkage/banner.html" %}
  <ul>
    <li><a href="/linkage/test">Test</a></li>
    <li id="current"><a href="/linkage/results">Results</a></li>
    <li><a href="/linkage/documentation">Documentation</a></li>
  </ul>
</div>


{% if latest_test_list %}
    <form name="resultsform" method="post" action="" enctype="multipart/form-data">
    <table hspace = "20" width = "90%" border="1">
      <tr align="left">
        <td><input type="checkbox" name="selectall" onclick="toggleall()" /></td>
        <td></td>
        <td><input type="submit" name="submit" value="Delete Selected Tests" onclick="buildlist()" /></td>
        <td></td>
      </tr>
      <tr align="left">
        <td></td>
        <th>Target</th>
        <th>Date</th>
        <th>Information</th>
      </tr>
    {% for test in latest_test_list %}
      <tr valign="top">
        <td><input type="checkbox" name="testcheck" value="{{ test.id }}" /></td>
        <td><a href="/linkage/{{ test.id }}/detail">{{ test.target }}</a></td>
        <td>{{ test.test_date }}</td>
        <td><i>Target Directory:</i>
            {% if test.target_dir %}
                {{ test.target_dir }}
            {% else %}
                N/A
            {% endif %}
            <br>
            <i>Recursion Level:</i> {{ test.recursion }}<br>
            <i>User:</i> {{ test.user }}<br>
            <i>Project:</i> {{ test.project }}<br>
            <i>Comments:</i> {{ test.comments }}
        </td>
      </tr>
    {% endfor %}
    </table>
    <input type="hidden", name="testlist", value="" />
    </form>
{% else %}
    <b>No tests are available.</b>
{% endif %}

</body>

<script language="JavaScript">
function toggleall() {
    chk = document.resultsform.testcheck;
    if (document.resultsform.selectall.checked == true) {
        // if only one test, no array
        if (typeof chk.length == 'undefined') {
            chk.checked = true;
        } else {
            for (i = 0; i < chk.length; i++) {
                chk[i].checked = true;
            }
        }
    } else {
        if (typeof chk.length == 'undefined') {
            chk.checked = false;
        } else {
            for (i = 0; i < chk.length; i++) {
                chk[i].checked = false;
            }
        }
    }
}
function buildlist() {
    chk = document.resultsform.testcheck;
    tlist = '';
    if (typeof chk.length == 'undefined') {
        tlist = chk.value;
    } else {
        for (i = 0; i < chk.length; i++) {
            if (chk[i].checked == true) {
                tlist = tlist + chk[i].value + ",";
            }
        }
    }
    document.resultsform.testlist.value = tlist;   
}
</script>

